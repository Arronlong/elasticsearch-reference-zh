# 基本概念

Elasticsearch里有几个核心概念。理解这些概念可有效简化学习过程。

## 准实时（NRT）

Elasticsearch是一个准实时的查询平台。也就是说从你对文档建立索引到该文档可查询，这中间会有一个小小延迟（通常是1秒左右）。

## 集群

集群是一组服务器节点，这些节点一起保存整个数据并在所有节点上提供联合索引和查询能力。每个集群有一个唯一的名称，默认是"elasticsearch"。每个节点通过设置的集群名称加入集群，且仅可以加入一个集群，因此集群名称很重要。

确保你不要在不同的环境下使用相同的名称，这可能会导致节点加入错误的集群。例如，你可以使用logging-dev,logging-stage,logging-prod等名称对应开发，预发布和生产环境。

一个集群只包含一个节点也是完全可以的。进而，你可能会有很多的拥有唯一名称的独立的集群。

## 节点

节点就是集群中的某个独立的服务器，保存数据并且参与集群的索引和搜索功能。与集群类似，节点也有一个唯一的名称与之对应，不过默认是在节点启动期随机生成一个人名。如果你不想使用默认名称，你可以自己指定。该名字对集群管理来说非常重要，你需要通过该名字定位Elasticsearch集群中节点。

节点可以通过集群名字加入指定集群。节点会默认加入“elasticsearch”集群，也就是说，如果你启动了若干节点，并且这些节点可以彼此自动发现，那么它们会自动加入名为“elasticsearch”的集群。

在一个集群里，可以有任意数量的节点。另一方面，如果当前没有正在运行的Elasticsearch节点，那么启动一个节点后，默认将组成一个单节点的名为“elasticsearch”的集群。

## 索引（Index）

索引一组含有相近字符的文档的集合。例如，你可以创建一个保存用户数据的索引，一个保存产品分类的索引，还有一个保存订单数据的索引。通过索引名称还确定一个索引（名字必须全部是小写字符），通过索引名称来对索引中保存的文档数据进行索引，检索，更新和删除操作。

在一个节点里，可以有任意数量的索引。

## 类型（Type）

在一个索引里，你可以定义一到多个类型。类型是索引里的逻辑分区，完全由你来确定它的语义。概括来说，类型用于定义一组含有通用字段的文档。例如，设计你运行了一个博客平台并且在一个索引中保存了所有数据。在这个索引中，你可以定义一个分类保存用户数据，一个分类保存博客数据，另一个分类保存评论数据。

## 文档（Document）

文档是可以被索引的基本信息单元。例如，你有一个文档来保存某个单一用户，一个文档保存某个单一产品，另一个文档保存单一订单。文档以JSON\(JavaScript Object Notation\)格式存储，JSON是当前互联网进行数据交换的常用格式。

在一个索引\/类型里，你可以保存任意数量的文档。需要注意的是，尽管文档物理存储在一个索引里，但是文档必须隶属于索引中的某个类型。

## 分块和副本\(Shards & Replicas\)

索引保存大量的数据，可能会达到单节点硬件条件的限制。例如，包含数十亿文档的单个索引可能需要占用1TB的磁盘空间，这可能会达到单节点的磁盘限制，或者在单节点上查询过慢。

为了解决这个问题，Elasticsearch可以把索引切分成需要小块，称为分块（shards）。当你创建一个索引的时候，你可以指定想用使用的分块数。每个分块就是一个独立的“索引”，具备索引的所有功能，可以被部署到集群中任意节点上。

分块概念非常重要，有两个主要原因：

* 分块让你可以水平拆分\/扩展你的数据卷。
* 分块可以让你将操作分布到多个分块上并行的进行操作（很有可能是分布到多个节点上），从而提高集群的性能和吞吐量。

分块在集群内如何分布以及如何将各分块上的文档组合回原始数据返回给请求，这些工作都是由Elasticsearch完成的，对用户来说是透明的。

在网络\/云环境下，随时有可能出现错误。当一个分块\/节点出现故障或者离线的时候，良好的故障恢复机制非常有用和应该具备的。因此，Elasticsearch可以将索引的分块拷贝多份，保存在备份分块中，这些分块简称副本（replicas）。

副本同样非常重要，两个主要原因：

* 在分块和节点失败的时候，提供了高可用机制。因此，副本不应该和原始分块保存在同一个节点上。
* 可以在任意副本上并行的执行操作，因此可以弹性扩展检索量。

